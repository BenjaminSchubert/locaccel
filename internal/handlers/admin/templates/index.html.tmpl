<!Doctype html>
<html lang="en">
    <meta charset="utf-8">
    <title>Locaccel Admin</title>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">

    <body>
        <h1>Locaccel Admin</h1>

        <div class="flex-columns">
            <section>
                <h2>Configuration</h2>
                <pre id="config">{{ .Conf }} </pre>
            </section>

            <section>
                <h2>Statistics</h2>

                <div class="flex-columns">
                    <table class="col-2-right-align">
                        <tbody>
                            <tr>
                                <td>Uncacheable</td>
                                <td>{{ .MiddlewareStats.UnCacheable.Load }}</td>
                            </tr>
                            <tr>
                                <td>Hits</td>
                                <td>{{ .MiddlewareStats.CacheHits.Load }}</td>
                            </tr>
                            <tr>
                                <td>Misses</td>
                                <td>{{ .MiddlewareStats.CacheMisses.Load }}</td>
                            </tr>
                            <tr>
                                <td>Total Downloaded</td>
                                <td>{{ asBytes .MiddlewareStats.BytesDownloaded.Load }}</td>
                            </tr>
                            <tr>
                                <td>Total Served</td>
                                <td>{{ asBytes .MiddlewareStats.BytesServed.Load }}</td>
                            </tr>
                        <tbody>
                    </table>

                    <table class="col-2-right-align col-3-right-align">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th># Entries</th>
                                <th>Size</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Database</td>
                                <td>{{ .CacheStats.DatabaseEntries }}</td>
                                <td>{{ .CacheStats.DatabaseSize }}</td>
                            </tr>
                            <tr>
                                <td>File Cache</td>
                                <td>{{ .CacheStats.FileCacheEntries }}</td>
                                <td>{{ .CacheStats.FileCacheSize }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h2>Breakdown</h2>
                <table class="col-2-right-align col-3-right-align">
                    <thead>
                        <th>Hostname</th>
                        <th># Entries</th>
                        <th>Size</th>
                    </thead>
                    <tbody>
                    {{ range $key, $info := .CacheStats.UsagePerHostName }}
                        <tr>
                            <td><a href="/hostname/{{ $key }}">{{ $key }}</a></td>
                            <td>{{ $info.Entries }}</td>
                            <td>{{ $info.Size }}</td>
                        </tr>
                    {{ end }}
                    </tbody>
                </table>
            </section>
        </div>
    </body>
</html>
